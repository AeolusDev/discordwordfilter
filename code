module.exports = async (event, context) => {

const lib = require('lib')({token: process.env.STDLIB_SECRET_TOKEN});

const userID = `${context.params.event.author.id}`

const BANNED_WORDS = ['fuck', 'Fuck', 'lfmao', 'LFMAO', 'Motherfucker', 'motherfucker', 'bitch', 'porn', 'sex', 'Shit', 'Shit', 'shit']; //Add banned words
    
const regEx = new RegExp(BANNED_WORDS.join('|'), 'gi');
let messageContent = event.content;
    
if (messageContent.match(regEx)) {
      await lib.discord.channels['@0.0.3'].messages.destroy({
        message_id: event.id,
        channel_id: event.channel_id,
      }),
      await lib.discord.users['@0.0.3'].dms.create({
        recipient_id: `${context.params.event.author.id}`,
        content: `WOAH THERE! Language dude! Watch it, you don't wanna get warned, do you?`,
      }); 
    
      await lib.discord.channels['@0.0.3'].messages.create({
    channel_id: ``, //You're channel id where you want to be notified. THIS IS IMPORTANT
    guild_id: ``, //You're server id. THIS IS IMPORTANT
    content: ' ALERT! SWEAR WORD DETECTED!', 
    tts: false,
    embed: {
      type: 'rich',
      title: 'I have detected a banned word!', 
      description: `<@${userID}> has said a banned word`, 
      fields: [
        {
          name: 'User',
          value: `<@!${userID}>`,
        },
        {
          name: 'Banned Word',
          value: `${messageContent}`,
        },
      ],
    },
  });
}
}
